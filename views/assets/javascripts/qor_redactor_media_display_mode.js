"use strict";$(function(){$.Redactor.prototype.mediadisplaymode=function(){return{langs:{en:{mediaDisplayMode:"Media Display Mode",mediaDisplayModeButton:"Display mode"}},buttonStyle:{position:"absolute","z-index":"5",top:"50%",left:"50%","margin-top":"-11px","line-height":"1","background-color":"rgba(0,0,0,.9)","border-radius":"3px",color:"#fff","font-size":"12px",padding:"7px 10px",cursor:"pointer","margin-left":"-120px"},getEditterButton:function(){return'<span id="redactor-image-displaymode" data-redactor="verified" contenteditable="false">'+this.lang.get("mediaDisplayModeButton")+"</span>"},getTemplate:function(){return String()+'<div class="redactor-modal-tab redactor-group">\n                    <div id="redactor-image-preview" class="redactor-modal-tab-side"></div>\n                    <div class="redactor-modal-tab-area" id="redactor-modal-displaymode">\n                        <section>\n                            <select id="modal-media-display-mode">\n                                <option value="0">Please select display mode</option>\n                                <option value="normal">Normal</option>\n                                <option value="original">Original</option>\n                                <option value="fullwidth">Full Width</option>\n                            </select>\n                        </section>\n                        <section>\n                            <button id="redactor-modal-button-action">Save</button>\n                            <button id="redactor-modal-button-cancel">Cancel</button>\n                        </section>\n                    </div></div>'},init:function(){if("pre"!==this.opts.type&&"inline"!==this.opts.type){var e=(this.button.add("mediaDisplayMode",this.lang.get("mediaDisplayMode")),this),i=this.core.editor();i.on("click.mediadisplaymode",this.mediadisplaymode.removeButton),i.find("img").each(function(i,t){$(t).on("click.mediadisplaymode touchstart.mediadisplaymode",e.mediadisplaymode.setImageEditter.bind(e))})}},insertButton:function(e){$(this.mediadisplaymode.getEditterButton()).css(this.mediadisplaymode.buttonStyle).appendTo(e.closest("#redactor-image-box")).on("click.mediadisplaymode",this.mediadisplaymode.show)},removeButton:function(e){$(e.target).closest("#redactor-image-box").length||$("#redactor-image-displaymode").remove()},setImageEditter:function(e){var i=$(e.target),t=this,a=i.closest(this.opts.imageTag);this.mediadisplaymode.$imageTag=a,this.mediadisplaymode.$image=i,this.mediadisplaymode.displaymode=this.mediadisplaymode.getDisplayMode(a.attr("class")),setTimeout(function(){t.mediadisplaymode.insertButton(i)},10)},getDisplayMode:function(e){},show:function(){var e=this.mediadisplaymode.displaymode;this.modal.addTemplate("mediadisplaymode",this.mediadisplaymode.getTemplate()),this.modal.load("mediadisplaymode","Media Display Mode",600),this.modal.getActionButton().text(this.lang.get("save")).on("click",this.mediadisplaymode.save),this.modal.show(),$("#modal-media-display-mode").val(e||0),$("#redactor-image-preview").html('<img src="'+this.mediadisplaymode.$image.prop("src")+'" style="max-width: 100%; opacity: 1">')},save:function(){var e=$("#modal-media-display-mode").val(),i=this.mediadisplaymode.$imageTag;i.removeClass(),0!=e&&i.addClass("rd-display-"+e),this.modal.close()}}}});